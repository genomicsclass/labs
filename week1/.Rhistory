setwd("C:\\Users\\Xiaodong\\Documents\\GitHub\\labs\\week1")
purl("exploratory_data_analysis.Rmd")
library(knitr)
purl("exploratory_data_analysis.Rmd")
library(UsingR)
x=father.son$fheight
library(UsingR)
x=father.son$fheight
length(x)
x
?sample
hist(x,breaks=seq(floor(min(x)),ceiling(max(x))),main="",xlab="Height")
xs<-seq(floor(min(x)),ceiling(max(x)),0.1)
plot(xs,ecdf(x)(xs),type="l",xlab="x=Height",ylab="F(x)")
test<-data.frame(da=c("a","a","v","b","b","c"),fr=c(1,4,2,4,6,3))
test
unique(test$da)
levels(test$da)
split(test,levels(test$da))
factor(test$da)
split(test,factor(test$da))
?merge
lapply(split(test,factor(test$da)),function(x) return(data.frame(da=x$a,fr=sum(x$fr)))
)
lapply(split(test,factor(test$da)),function(x) return(data.frame(da=x$a[1],fr=sum(x$fr))))
x$fr
test$fr
sum(test$fr)
lapply(split(test,factor(test$da)),function(x) return(data.frame(da=x$a[1],fr=sum(x$fr))))
test$a
lapply(split(test,factor(test$da)),function(x) return(data.frame(da=x$da[1],fr=sum(x$fr))))
sapply(split(test,factor(test$da)),function(x) return(data.frame(da=x$da[1],fr=sum(x$fr))))
lapply(split(test,factor(test$da)),function(x) return(data.frame(da=x$da[1],fr=sum(x$fr))))
factor(test)
factor(test$da)
mean(x>72)
1-pnorm(72,mean(x),sd(x))
mean(x>72)
1-pnorm(72,mean(x),sd(x))
mean(x>70)
1-pnorm(70,mean(x),sd(x))
mean(x>72)
1-pnorm(72,mean(x),sd(x))
mean(x>70)
1-pnorm(70,mean(x),sd(x))
mean(x<70)
pnorm(70,mean(x),sd(x))
mean(x>72)
1-pnorm(72,mean(x),sd(x))
mean(x>70)
1-pnorm(70,mean(x),sd(x))
mean(x<70)
pnorm(70,mean(x),sd(x))
mean(x<65)
pnorm(65,mean(x),sd(x))
ps <- seq(0.01,0.99,0.01)
qs <- quantile(x,ps)
normalqs <- qnorm(ps,mean(x),sd(x))
plot(normalqs,qs,xlab="Normal percentiles",ylab="Height percentiles")
abline(0,1) ##identity line
qqnorm(x)
qqline(x)
hist(exec.pay)
qqnorm(exec.pay)
qqline(exec.pay)
boxplot(exec.pay,ylab="10,000s of dollars",ylim=c(0,400))
data("father.son")
x=father.son$fheight
y=father.son$sheight
plot(x,y,xlab="Father's height in inches",ylab="Son's height in inches",main=paste("correlation =",signif(cor(x,y),2)))
f
boxplot(y,round(x))
x
round(x)
boxplot(split(y,round(x)))
levels(round(x))
levels(as.factor(round(x)))
y
split(y,round(x))
str(x)
str(y)
?split
split(y,round(x[1:10]))
length(x)
1078/4
1078/2
split(y,round(x[1:539]))
boxplot(split(y,round(x)))
boxplot(split(y,round(x[1:539])))
539/11
boxplot(split(y,round(x[1:49])))
?split
boxplot(split(y,round(x)))
print(mean(y[ round(x) == 72]))
sapply(split(y,round(x)),mean)
x=(x-mean(x))/sd(x)
y=(y-mean(y))/sd(y)
means=tapply(y,round(x*4)/4,mean)
fatherheights=as.numeric(names(means))
plot(fatherheights,means,ylab="average of strata of son heights",ylim=range(fatherheights))
abline(0,cor(x,y))
a=rnorm(100);a[1]=10
b=rnorm(100);b[1]=11
plot(a,b,main=paste("correlation =",signif(cor(a,b),2)))
a=rnorm(100);a[1]=10
b=rnorm(100);b[1]=11
plot(a,b,main=paste("correlation =",signif(cor(a,b),2)))
a=rnorm(100);a[1]=10
b=rnorm(100);b[1]=11
plot(a,b,main=paste("correlation =",signif(cor(a,b),2)))
a=rnorm(100);a[1]=10
b=rnorm(100);b[1]=11
plot(a,b,main=paste("correlation =",signif(cor(a,b),2)))
a=rnorm(100);a[1]=10
b=rnorm(100);b[1]=11
plot(a,b,main=paste("correlation =",signif(cor(a,b),2)))
a=rnorm(100)
b=rnorm(100)
plot(a,b,main=paste("correlation =",signif(cor(a,b),2)))
set.seed(1)
a=rnorm(100);a[1]<-25
b=rnorm(100);b[1]<-26
plot(a,b,main=paste("correlation=",signif(cor(a,b,method="spearman"),2)))
set.seed(1)
a=rnorm(100);a[1]<-25
b=rnorm(100);b[1]<-26
plot(a,b,main=paste("cor_spearman=",signif(cor(a,b,method="spearman"),2),
"corr=",signif(cor(a,b),2)))
x<-rnorm(100)
x[sample(1:100,1)]<-100
boxplot(x,main=paste("Mean ",mean(x),", SD ",sd(x),
"Median ",median(x),"MAD ", mad(x)))
x<-rnorm(100)
x[sample(1:100,1)]<-100
boxplot(x,main=paste("Mean ",mean(x),", SD ",sd(x),"\n",
"Median ",median(x),"MAD ", mad(x)))
x<-rnorm(100)
x[sample(1:100,1)]<-100
boxplot(x,main=paste("Mean ",signif(mean(x),1)", SD ",sd(x),"\n",
"Median ",median(x),"MAD ", mad(x)))
x<-rnorm(100)
x[sample(1:100,1)]<-100
boxplot(x,main=paste("Mean ",signif(mean(x),1),", SD ",sd(x),"\n",
"Median ",median(x),"MAD ", mad(x)))
x<-rnorm(100)
x[sample(1:100,1)]<-100
boxplot(x,main=paste("Mean ",signif(mean(x),1),", SD ",signif(sd(x),1),"\n",
"Median ",signif(median(x),1),"MAD ", signif(mad(x),1)))
x<-rnorm(100)
x[sample(1:100,1)]<-100
boxplot(x,main=paste("Mean ",signif(mean(x),1),", SD ",signif(sd(x),1),"\n",
"Median ",signif(median(x),1),"MAD ", signif(mad(x),1)))
x<-rnorm(100)
y<-rnorm(100)
n<-sample(1:100,1)
x[n]<-100
y[n]<-80
par(mfrow=2)
plot(x,y,main=paste("corr=",cor(x,y)))
plot(rank(x),rank(y),main=paste("spearman=",cor(x,y,method="spearman")))
x<-rnorm(100)
y<-rnorm(100)
n<-sample(1:100,1)
x[n]<-100
y[n]<-80
par(mfrow=c(2,1))
plot(x,y,main=paste("corr=",cor(x,y)))
plot(rank(x),rank(y),main=paste("spearman=",cor(x,y,method="spearman")))
x<-rnorm(100)
y<-rnorm(100)
n<-sample(1:100,1)
x[n]<-100
y[n]<-80
par(mfrow=c(1,2))
plot(x,y,main=paste("corr=",cor(x,y)))
plot(rank(x),rank(y),main=paste("spearman=",cor(x,y,method="spearman")))
x<-rnorm(100)
y<-rnorm(100)
n<-sample(1:100,1)
x[n]<-100
y[n]<-80
par(mfrow=c(1,2))
plot(x,y,main=paste("corr=",signif(cor(x,y),1))
plot(rank(x),rank(y),main=paste("spearman=",signif(cor(x,y,method="spearman"),1))
x<-rnorm(100)
y<-rnorm(100)
n<-sample(1:100,1)
x[n]<-100
y[n]<-80
par(mfrow=c(1,2))
plot(x,y,main=paste("corr=",signif(cor(x,y),1)))
plot(rank(x),rank(y),main=paste("spearman=",signif(cor(x,y,method="spearman"),1)))
x<-rnorm(100)
y<-rnorm(100)
n<-sample(1:100,1)
x[n]<-100
y[n]<-80
par(mfrow=c(1,2))
plot(x,y,main=paste("corr=",signif(cor(x,y),2)))
plot(rank(x),rank(y),main=paste("spearman=",signif(cor(x,y,method="spearman"),2)))
set.seed(1)
a=rnorm(100);a[1]<-25
b=rnorm(100);b[1]<-26
plot(a,b,main=paste("cor_spearman=",round(cor(a,b,method="spearman"),2),
"corr=",round(cor(a,b),2)))
x<-rnorm(100)
y<-rnorm(100)
n<-sample(1:100,1)
x[n]<-100
y[n]<-80
par(mfrow=c(1,2))
plot(x,y,main=paste("corr=",round(cor(x,y),2)))
plot(rank(x),rank(y),main=paste("spearman=",round(cor(x,y,method="spearman"),2)))
